"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9928],{1206:function(e,t,n){n.r(t),n.d(t,{default:function(){return K}});var r=n(7294),i=n(3156),a=n(7452),c=n(9960),l={Generate:1,Generated:2},o=(0,r.createContext)();function u(e){var t=e.children,n=(0,r.useState)(l.Generate),i=n[0],a=n[1];return r.createElement(o.Provider,{value:[i,a]},t)}function s(){return(0,r.useContext)(o)}var p=(0,r.createContext)(),m={pointer:"",verifier:"",plaintext:"",exclusiveContent:""};function d(e){var t=e.children,n=(0,r.useState)(m),i=n[0],a=n[1];return r.createElement(p.Provider,{value:[i,a]},t)}function f(){return(0,r.useContext)(p)}var h=n(4165),v=n(5861),y="https://webmonetization.org/api/exclusive-content",E="https://webmonetization.org/api/receipts";function x(){return(x=(0,v.Z)((0,h.Z)().mark((function e(t,n,r){var i,a,c,l,o,u,s,p;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n||E,e.next=3,g(t);case 3:return a=e.sent,c=a.key,l=a.nonce,e.next=8,Z(r,i,c);case 8:return o=e.sent,u=o.cypherText,s=o.cypherVerifier,p=o.initVector,e.abrupt("return",{verifier:i,nonce:l,cypherText:u,cypherVerifier:s,initVector:p});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return(w=(0,v.Z)((0,h.Z)().mark((function e(t){var n;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(y+"/deriveNewKey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentPointer:t})});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(e,t,n){return b.apply(this,arguments)}function b(){return(b=(0,v.Z)((0,h.Z)().mark((function e(t,n,r){var i,a,c,l;return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(V(r));case 2:return i=e.sent,o=void 0,u=void 0,o=new Uint8Array(16),u=crypto.getRandomValues(o),a=G(u),e.next=6,k(T(t),i,T(a));case 6:return c=e.sent,e.next=9,k(T(n),i,T(a));case 9:return l=e.sent,e.abrupt("return",{cypherText:G(c),cypherVerifier:G(l),initVector:a});case 11:case"end":return e.stop()}var o,u}),e)})))).apply(this,arguments)}function C(e){return S.apply(this,arguments)}function S(){return(S=(0,v.Z)((0,h.Z)().mark((function e(t){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt","decrypt"]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t,n){return N.apply(this,arguments)}function N(){return(N=(0,v.Z)((0,h.Z)().mark((function e(t,n,r){return(0,h.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return(new TextEncoder).encode(e)}function G(e){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(e)))}function V(e){for(var t=window.atob(e),n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0,a=t.length;i<a;i++)r[i]=t.charCodeAt(i);return n}var A=n(4054),O=n(3841),J=n(89),W=n(6815),j=n(3321),F={scriptTab:"scriptTab_RhN3",contentGeneratorBtn:"contentGeneratorBtn_veKI"};function M(){var e=s(),t=(e[0],e[1]),n=f(),i=(n[0],n[1]),a=(0,r.useState)(""),c=a[0],o=a[1],u=(0,r.useState)(""),p=u[0],m=u[1],d=(0,r.useState)(""),h=d[0],v=d[1],y=""===c||""===h;return r.createElement("form",{onSubmit:function(e){return e.preventDefault()}},r.createElement(A.Z,{margin:"normal",fullWidth:!0},r.createElement(O.Z,{shrink:!0,htmlFor:"pointer"},"Payment Pointer"),r.createElement(J.Z,{id:"pointer",type:"text",value:c,onChange:function(e){o(e.target.value)}}),r.createElement(W.Z,{id:"pointer-helper-text"},"Example: ",r.createElement("code",null,"$spsp.example.com/alice")," or"," ",r.createElement("code",null,"https://spsp.example.com/alice"))),r.createElement(A.Z,{margin:"normal",fullWidth:!0},r.createElement(O.Z,{shrink:!0,htmlFor:"plaintext"},"Content"),r.createElement(J.Z,{id:"plaintext",multiline:!0,rows:10,value:h,onChange:function(e){v(e.target.value)},style:{borderStyle:"solid solid none solid",borderWidth:"1px",borderColor:"#949494",padding:"8px"}}),r.createElement(W.Z,{id:"pointer-helper-text"},"This can really just be plain text, e.g. ",r.createElement("code",null,"Hello World"),", or an HTML tag, e.g."," ",r.createElement("code",null,"<div><p>Hello World</p></div>"))),r.createElement(A.Z,{margin:"normal",fullWidth:!0},r.createElement(O.Z,{shrink:!0,htmlFor:"verifier"},"Verifier URL (optional)"),r.createElement(J.Z,{id:"verifier",type:"text",value:p,onChange:function(e){m(e.target.value)}}),r.createElement(W.Z,{id:"pointer-helper-text"},"If this is not specified, we will use a hosted verifier. If you decide to use your own verifier, specify something like:"," ",r.createElement("code",null,"https://verifier.example.com"))),r.createElement(j.Z,{className:F.contentGeneratorBtn,variant:"outlined",size:"medium",disabled:y,type:"submit",onClick:function(){(function(e,t,n){return x.apply(this,arguments)})(c,p,h).then((function(e){i({pointer:c,verifier:e.verifier,plaintext:h,nonce:e.nonce,cypherText:e.cypherText,cypherVerifier:e.cypherVerifier,initVector:e.initVector}),t(l.Generated)}))}},"Generate"))}var H=n(614);function I(){var e=f()[0],t=e.verifier.endsWith("/")?e.verifier:e.verifier+"/",n='<div \n  class="exclusive" \n  id='+JSON.stringify(Math.random().toString(36).substr(2).replace(/^[0-9]/g,"aa"))+"\n  paymentpointer="+JSON.stringify(e.pointer)+"\n  proxypaymentpointer="+JSON.stringify(t+encodeURIComponent(e.pointer))+"\n  cyphertext="+JSON.stringify(e.cypherText)+"\n  cypherverifier="+JSON.stringify(e.cypherVerifier)+"\n  initvector="+JSON.stringify(e.initVector)+"\n  nonce="+JSON.stringify(e.nonce)+'\n>\n  <div class="exclusiveMessage"></div>\n  <div class="exclusiveContent"></div>\n</div>';return r.createElement(r.Fragment,null,r.createElement("p",null,"Here is what you need to do to embed it on your web page:"),r.createElement("p",null,"1. Add the following ",r.createElement("code",null,"div")," tag to your HTML, in the spot you want the exclusive content to appear."),r.createElement(H.Z,{className:"language-html"},n),r.createElement("p",null,"2. Add"," ",r.createElement("strong",null,"one of the following ",r.createElement("code",null,"script")," tags"," ")," ","to your HTML",r.createElement("code",null,"body"),". You have the choice between embedding a script that depends on an external script and one that doesn't have any dependencies. If you include multiple exclusive content ",r.createElement("code",null,"div")," ","tags, you only need to add the script once."))}var P=n(1703),z=n(44);function B(){var e=(0,r.useState)(""),t=e[0],n=e[1];return(0,r.useEffect)((function(){fetch("../../../../static/js/exclusive-content.js").then((function(e){return e.text()})).then((function(e){n("<script>\n"+e+"\n<\/script>")}),(function(e){n(e)}))})),r.createElement(H.Z,{className:"language-html"},t)}function L(){var e=r.useState(0),t=e[0],n=e[1];return r.createElement("div",{className:"script-tabs"},r.createElement(P.Z,{value:t,onChange:function(e,t){n(t)},indicatorColor:"primary",textColor:"primary"},r.createElement(z.Z,{label:"Dependencies"}),r.createElement(z.Z,{label:"No Dependencies"})),r.createElement(U,{value:t,index:0},r.createElement(H.Z,{className:"language-html"},'<script src="https://webmonetization.org/js/exclusive-content.js"><\/script>')),r.createElement(U,{value:t,index:1},r.createElement(B,null)))}function U(e){var t=e.children,n=e.value,i=e.index;return r.createElement(r.Fragment,null,n===i&&r.createElement("div",{className:F.scriptTab},t))}function R(){var e=s(),t=(e[0],e[1]);return r.createElement(j.Z,{variant:"outlined",size:"medium",onClick:function(){t(l.Generate)}},"Back")}function D(){var e=s()[0];return e===l.Generate?r.createElement(r.Fragment,null,r.createElement("h2",null,"Generate Exclusive Content"),r.createElement("p",null,"In order to generate exclusive content, we need the following information:"),r.createElement(M,null)):e===l.Generated?r.createElement(r.Fragment,null,r.createElement("h2",null,"Exclusive Content Generated!"),r.createElement(I,null),r.createElement(L,null),r.createElement(R,null)):void 0}function K(e){var t=e.config;return r.createElement(a.Z,{permalink:"/exclusive-content",title:t.title,description:t.tagline},r.createElement(d,null,r.createElement(u,null,r.createElement(i.Z,{maxWidth:"md",component:"section"},r.createElement("h1",null,"Exclusive Content Generator"),r.createElement("p",null,"This tool allows you to create exclusive content which is only unlocked if payment can be verified."," ",r.createElement(c.Z,{to:"/docs/exclusive-content#exclusive-content-with-payment-verification"},"Learn more!")),r.createElement(D,null)))))}}}]);