"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[172],{2518:function(e,t,n){n.d(t,{M:function(){return i}});var r=n(7294);function i(e){var t=e.children;return r.createElement("h2",{className:"sectionHeader"},t)}},1101:function(e,t,n){n.r(t),n.d(t,{default:function(){return oe}});var r=n(7294),i=n(3832),a=n(7452),l=n(9960),c={Generate:1,Generated:2},o=(0,r.createContext)();function u(e){var t=e.children,n=(0,r.useState)(c.Generate),i=n[0],a=n[1];return r.createElement(o.Provider,{value:[i,a]},t)}function s(){return(0,r.useContext)(o)}var p=(0,r.createContext)(),d={pointer:"",verifier:"",plaintext:"",exclusiveContent:""};function m(e){var t=e.children,n=(0,r.useState)(d),i=n[0],a=n[1];return r.createElement(p.Provider,{value:[i,a]},t)}function f(){return(0,r.useContext)(p)}var v=n(2518);function h(){return r.createElement(r.Fragment,null,r.createElement("p",null,"In order to generate exclusive content, we need the following information:"))}var E=n(1017),y=n(4035),g="https://webmonetization.org/api/exclusive-content",x="https://webmonetization.org/api/receipts";function Z(){return(Z=(0,y.Z)((0,E.Z)().mark((function e(t,n,r){var i,a,l,c,o,u,s,p;return(0,E.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=n||x,e.next=3,w(t);case 3:return a=e.sent,l=a.key,c=a.nonce,e.next=8,b(r,i,l);case 8:return o=e.sent,u=o.cypherText,s=o.cypherVerifier,p=o.initVector,e.abrupt("return",{verifier:i,nonce:c,cypherText:u,cypherVerifier:s,initVector:p});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e){return C.apply(this,arguments)}function C(){return(C=(0,y.Z)((0,E.Z)().mark((function e(t){var n;return(0,E.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(g+"/deriveNewKey",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentPointer:t})});case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e,t,n){return S.apply(this,arguments)}function S(){return(S=(0,y.Z)((0,E.Z)().mark((function e(t,n,r){var i,a,l,c;return(0,E.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k(M(r));case 2:return i=e.sent,o=void 0,u=void 0,o=new Uint8Array(16),u=crypto.getRandomValues(o),a=F(u),e.next=6,N(G(t),i,G(a));case 6:return l=e.sent,e.next=9,N(G(n),i,G(a));case 9:return c=e.sent,e.abrupt("return",{cypherText:F(l),cypherVerifier:F(c),initVector:a});case 11:case"end":return e.stop()}var o,u}),e)})))).apply(this,arguments)}function k(e){return T.apply(this,arguments)}function T(){return(T=(0,y.Z)((0,E.Z)().mark((function e(t){return(0,E.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.importKey("raw",t,"AES-GCM",!1,["encrypt","decrypt"]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e,t,n){return V.apply(this,arguments)}function V(){return(V=(0,y.Z)((0,E.Z)().mark((function e(t,n,r){return(0,E.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},n,t));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return(new TextEncoder).encode(e)}function F(e){return window.btoa(String.fromCharCode.apply(null,new Uint8Array(e)))}function M(e){for(var t=window.atob(e),n=new ArrayBuffer(t.length),r=new Uint8Array(n),i=0,a=t.length;i<a;i++)r[i]=t.charCodeAt(i);return n}var A=n(4436),O=n(5161),j=n(8799),H=n(585),J=n(282);function W(){var e=s(),t=(e[0],e[1]),n=f(),i=(n[0],n[1]),a=(0,r.useState)(""),l=a[0],o=a[1],u=(0,r.useState)(""),p=u[0],d=u[1],m=(0,r.useState)(""),v=m[0],h=m[1];return r.createElement(r.Fragment,null,r.createElement(A.Z,{margin:"normal",fullWidth:!0},r.createElement(O.Z,{shrink:"false",htmlFor:"pointer"},"Payment Pointer"),r.createElement(j.Z,{id:"pointer",type:"text",value:l,onChange:function(e){o(e.target.value)}}),r.createElement(H.Z,{id:"pointer-helper-text"},"Example: ",r.createElement("code",null,"$spsp.example.com/alice")," or"," ",r.createElement("code",null,"https://spsp.example.com/alice"))),r.createElement(A.Z,{margin:"normal",fullWidth:!0},r.createElement(O.Z,{shrink:"false",htmlFor:"plaintext"},"Content"),r.createElement(j.Z,{id:"plaintext",multiline:!0,rows:10,value:v,onChange:function(e){h(e.target.value)},style:{borderStyle:"solid solid none solid",borderWidth:"1px",borderColor:"#949494",padding:"8px"}}),r.createElement(H.Z,{id:"pointer-helper-text"},"This can really just be plain text, e.g. ",r.createElement("code",null,"Hello World"),", or an HTML tag, e.g."," ",r.createElement("code",null,"<div><p>Hello World</p></div>"))),r.createElement(A.Z,{margin:"normal",fullWidth:!0},r.createElement(O.Z,{shrink:"false",htmlFor:"verifier"},"Verifier URL (optional)"),r.createElement(j.Z,{id:"verifier",type:"text",value:p,onChange:function(e){d(e.target.value)}}),r.createElement(H.Z,{id:"pointer-helper-text"},"If this is not specified, we will use a hosted verifier. If you decide to use your own verifier, specify something like:"," ",r.createElement("code",null,"https://verifier.example.com"))),r.createElement(J.Z,{variant:"outlined",size:"medium",disabled:!l|!v,onClick:function(){(function(e,t,n){return Z.apply(this,arguments)})(l,p,v).then((function(e){i({pointer:l,verifier:e.verifier,plaintext:v,nonce:e.nonce,cypherText:e.cypherText,cypherVerifier:e.cypherVerifier,initVector:e.initVector}),t(c.Generated)}))}},"Generate"))}var I=n(9176),P=n(3454),z=n(3173),L=n(7083),U=n(3579),B=n(9525),R=n(7212),D=n(1395),K=n(8334),Y=n(5261);function $(e){var t=r.useState(!1),n=t[0],i=t[1],a=function(e){var t=document.getElementById(e).innerText;navigator.clipboard.writeText(t).then((function(){i(!0),console.log("copied to clipboard")}),(function(){console.log("copy to clipboard failed")}))};return r.createElement("div",null,r.createElement(L.ZP,{title:e.message},r.createElement(J.Z,{tooltip:!0,onClick:function(){return a(e.id)}},r.createElement(z.Z,null))),r.createElement(U.Z,{open:n,onClose:function(){i(!1)}},r.createElement(B.Z,null,r.createElement(Y.Z,{display:"flex",justifyContent:"center",alignItems:"center"},r.createElement(D.Z,{style:{color:K.Z[500],fontSize:50}})),r.createElement(R.Z,null,"Copied to clipboard!"))))}function q(){var e=f()[0],t=e.verifier.endsWith("/")?e.verifier:e.verifier+"/",n='<div \n  class="exclusive" \n  id='+JSON.stringify(Math.random().toString(36).substr(2).replace(/^[0-9]/g,"aa"))+"\n  paymentpointer="+JSON.stringify(e.pointer)+"\n  proxypaymentpointer="+JSON.stringify(t+encodeURIComponent(e.pointer))+"\n  cyphertext="+JSON.stringify(e.cypherText)+"\n  cypherverifier="+JSON.stringify(e.cypherVerifier)+"\n  initvector="+JSON.stringify(e.initVector)+"\n  nonce="+JSON.stringify(e.nonce)+'\n>\n  <div class="exclusiveMessage" style="text-align: center"></div>\n  <div class="exclusiveContent"></div>\n</div>';return r.createElement(r.Fragment,null,r.createElement("p",null,"Here is what you need to do to embed it on your web page:"),r.createElement("p",null,"1. Add the following ",r.createElement("code",null,"div")," tag to your HTML, in the spot you want the exclusive content to appear."),r.createElement($,{id:"ec-div",message:"Copy div tag"}),r.createElement(I.Z,{id:"ec-div",language:"htmlbars",style:P.Z},n),r.createElement("p",null,"2. Add"," ",r.createElement("strong",null,"one of the following ",r.createElement("code",null,"script")," tags"," ")," ","to your HTML",r.createElement("code",null,"body"),". You have the choice between embedding a script that depends on an external script and one that doesn't have any dependencies. If you include multiple exclusive content ",r.createElement("code",null,"div")," ","tags, you only need to add the script once."))}var Q=n(102),X=n(5258),_=n(7821),ee=n(1423);function te(){return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement($,{id:"dependentScript",message:"Copy script with dependencies"}),r.createElement(I.Z,{id:"dependentScript",language:"htmlbars",style:P.Z},'<script src="https://webmonetization.org/js/exclusive-content.js"><\/script>')))}function ne(){var e=(0,r.useState)(""),t=e[0],n=e[1];return(0,r.useEffect)((function(){fetch("../../../../static/js/exclusive-content.js").then((function(e){return e.text()})).then((function(e){n("<script>\n"+e+"\n<\/script>")}),(function(e){n(e)}))})),r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement($,{id:"independentScript",message:"Copy script without dependencies"}),r.createElement(I.Z,{id:"independentScript",language:"htmlbars",style:P.Z},t)))}var re=["children","value","index"];function ie(){var e=r.useState(0),t=e[0],n=e[1];return r.createElement(r.Fragment,null,r.createElement("div",null,r.createElement(X.Z,{position:"static",color:"none",style:{boxShadow:"none"}},r.createElement(_.Z,{value:t,onChange:function(e,t){n(t)},indicatorColor:"primary",textColor:"primary"},r.createElement(ee.Z,{label:"Dependencies"}),r.createElement(ee.Z,{label:"No Dependencies"}))),r.createElement(ae,{value:t,index:0},r.createElement(te,null)),r.createElement(ae,{value:t,index:1},r.createElement(ne,null))))}function ae(e){var t=e.children,n=e.value,i=e.index,a=(0,Q.Z)(e,re);return r.createElement("div",a,n===i&&r.createElement(Y.Z,{p:3,style:{padding:"24px 0 24px 0"}},t))}function le(){var e=s(),t=(e[0],e[1]);return r.createElement(r.Fragment,null,r.createElement(J.Z,{variant:"outlined",size:"medium",onClick:function(){t(c.Generate)}},"Back"))}function ce(){var e=s()[0];return e===c.Generate?r.createElement(r.Fragment,null,r.createElement(v.M,null,"Generate Exclusive Content"),r.createElement(h,null),r.createElement(W,null)):e===c.Generated?r.createElement(r.Fragment,null,r.createElement(v.M,null,"Exclusive Content Generated!"),r.createElement(q,null),r.createElement(ie,null),r.createElement(le,null)):void 0}function oe(e){var t=e.config;return r.createElement(a.Z,{permalink:"/exclusive-content",title:t.title,description:t.tagLine},r.createElement(m,null,r.createElement(u,null,r.createElement("div",{className:"docMainWrapper wrapper"},r.createElement(i.Z,{className:"mainContainer documentContainer metaTagContainer"},r.createElement("header",{className:"postHeader"},r.createElement("h1",null,"Exclusive Content Generator")),r.createElement("p",null,"This tool allows you to create exclusive content which is only unlocked if payment can be verified."," ",r.createElement(l.Z,{to:"/docs/exclusive-content#exclusive-content-with-payment-verification"},"Learn more!")),r.createElement(ce,null))))))}}}]);